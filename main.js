(()=>{var yt=Object.create,he=Object.defineProperty,mt=Object.getPrototypeOf,St=Object.prototype.hasOwnProperty,vt=Object.getOwnPropertyNames,wt=Object.getOwnPropertyDescriptor;var Tt=o=>he(o,"__esModule",{value:!0});var gt=(o,e)=>()=>(e||(e={exports:{}},o(e.exports,e)),e.exports);var xt=(o,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of vt(e))!St.call(o,r)&&r!=="default"&&he(o,r,{get:()=>e[r],enumerable:!(s=wt(e,r))||s.enumerable});return o},Pt=o=>xt(Tt(he(o!=null?yt(mt(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);var Be=gt((At,ee)=>{(function(){function o(t,i,l){return t.call.apply(t.bind,arguments)}function e(t,i,l){if(!t)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),t.apply(i,h)}}return function(){return t.apply(i,arguments)}}function s(t,i,l){return s=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?o:e,s.apply(null,arguments)}var r=Date.now||function(){return+new Date};function n(t,i){this.a=t,this.o=i||t,this.c=this.o.document}var d=!!window.FontFace;function u(t,i,l,a){if(i=t.c.createElement(i),l)for(var h in l)l.hasOwnProperty(h)&&(h=="style"?i.style.cssText=l[h]:i.setAttribute(h,l[h]));return a&&i.appendChild(t.c.createTextNode(a)),i}function y(t,i,l){t=t.c.getElementsByTagName(i)[0],t||(t=document.documentElement),t.insertBefore(l,t.lastChild)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,i,l){i=i||[],l=l||[];for(var a=t.className.split(/\s+/),h=0;h<i.length;h+=1){for(var p=!1,c=0;c<a.length;c+=1)if(i[h]===a[c]){p=!0;break}p||a.push(i[h])}for(i=[],h=0;h<a.length;h+=1){for(p=!1,c=0;c<l.length;c+=1)if(a[h]===l[c]){p=!0;break}p||i.push(a[h])}t.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function P(t,i){for(var l=t.className.split(/\s+/),a=0,h=l.length;a<h;a++)if(l[a]==i)return!0;return!1}function A(t){return t.o.location.hostname||t.a.location.hostname}function L(t,i,l){function a(){m&&h&&p&&(m(c),m=null)}i=u(t,"link",{rel:"stylesheet",href:i,media:"all"});var h=!1,p=!0,c=null,m=l||null;d?(i.onload=function(){h=!0,a()},i.onerror=function(){h=!0,c=Error("Stylesheet failed to load"),a()}):setTimeout(function(){h=!0,a()},0),y(t,"head",i)}function C(t,i,l,a){var h=t.c.getElementsByTagName("head")[0];if(h){var p=u(t,"script",{src:i}),c=!1;return p.onload=p.onreadystatechange=function(){c||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(c=!0,l&&l(null),p.onload=p.onreadystatechange=null,p.parentNode.tagName=="HEAD"&&h.removeChild(p))},h.appendChild(p),setTimeout(function(){c||(c=!0,l&&l(Error("Script load timeout")))},a||5e3),p}return null}function J(){this.a=0,this.c=null}function E(t){return t.a++,function(){t.a--,M(t)}}function I(t,i){t.c=i,M(t)}function M(t){t.a==0&&t.c&&(t.c(),t.c=null)}function re(t){this.a=t||"-"}re.prototype.c=function(t){for(var i=[],l=0;l<arguments.length;l++)i.push(arguments[l].replace(/[\W_]+/g,"").toLowerCase());return i.join(this.a)};function F(t,i){this.c=t,this.f=4,this.a="n";var l=(i||"n4").match(/^([nio])([1-9])$/i);l&&(this.a=l[1],this.f=parseInt(l[2],10))}function X(t){return ge(t)+" "+(t.f+"00")+" 300px "+H(t.c)}function H(t){var i=[];t=t.split(/,\s*/);for(var l=0;l<t.length;l++){var a=t[l].replace(/['"]/g,"");a.indexOf(" ")!=-1||/^\d/.test(a)?i.push("'"+a+"'"):i.push(a)}return i.join(",")}function j(t){return t.a+t.f}function ge(t){var i="normal";return t.a==="o"?i="oblique":t.a==="i"&&(i="italic"),i}function qe(t){var i=4,l="n",a=null;return t&&((a=t.match(/(normal|oblique|italic)/i))&&a[1]&&(l=a[1].substr(0,1).toLowerCase()),(a=t.match(/([1-9]00|normal|bold)/i))&&a[1]&&(/bold/i.test(a[1])?i=7:/[1-9]00/.test(a[1])&&(i=parseInt(a[1].substr(0,1),10)))),l+i}function Ze(t,i){this.c=t,this.f=t.o.document.documentElement,this.h=i,this.a=new re("-"),this.j=i.events!==!1,this.g=i.classes!==!1}function $e(t){t.g&&b(t.f,[t.a.c("wf","loading")]),z(t,"loading")}function xe(t){if(t.g){var i=P(t.f,t.a.c("wf","active")),l=[],a=[t.a.c("wf","loading")];i||l.push(t.a.c("wf","inactive")),b(t.f,l,a)}z(t,"inactive")}function z(t,i,l){t.j&&t.h[i]&&(l?t.h[i](l.c,j(l)):t.h[i]())}function Qe(){this.c={}}function et(t,i,l){var a=[],h;for(h in i)if(i.hasOwnProperty(h)){var p=t.c[h];p&&a.push(p(i[h],l))}return a}function K(t,i){this.c=t,this.f=i,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function q(t){y(t.c,"body",t.a)}function Z(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+H(t.c)+";"+("font-style:"+ge(t)+";font-weight:"+(t.f+"00")+";")}function Pe(t,i,l,a,h,p){this.g=t,this.j=i,this.a=a,this.c=l,this.f=h||3e3,this.h=p||void 0}Pe.prototype.start=function(){var t=this.c.o.document,i=this,l=r(),a=new Promise(function(c,m){function S(){r()-l>=i.f?m():t.fonts.load(X(i.a),i.h).then(function(g){1<=g.length?c():setTimeout(S,25)},function(){m()})}S()}),h=null,p=new Promise(function(c,m){h=setTimeout(m,i.f)});Promise.race([p,a]).then(function(){h&&(clearTimeout(h),h=null),i.g(i.a)},function(){i.j(i.a)})};function ke(t,i,l,a,h,p,c){this.v=t,this.B=i,this.c=l,this.a=a,this.s=c||"BESbswy",this.f={},this.w=h||3e3,this.u=p||null,this.m=this.j=this.h=this.g=null,this.g=new K(this.c,this.s),this.h=new K(this.c,this.s),this.j=new K(this.c,this.s),this.m=new K(this.c,this.s),t=new F(this.a.c+",serif",j(this.a)),t=Z(t),this.g.a.style.cssText=t,t=new F(this.a.c+",sans-serif",j(this.a)),t=Z(t),this.h.a.style.cssText=t,t=new F("serif",j(this.a)),t=Z(t),this.j.a.style.cssText=t,t=new F("sans-serif",j(this.a)),t=Z(t),this.m.a.style.cssText=t,q(this.g),q(this.h),q(this.j),q(this.m)}var $={D:"serif",C:"sans-serif"},oe=null;function be(){if(oe===null){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);oe=!!t&&(536>parseInt(t[1],10)||parseInt(t[1],10)===536&&11>=parseInt(t[2],10))}return oe}ke.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),Oe(this)};function Ce(t,i,l){for(var a in $)if($.hasOwnProperty(a)&&i===t.f[$[a]]&&l===t.f[$[a]])return!0;return!1}function Oe(t){var i=t.g.a.offsetWidth,l=t.h.a.offsetWidth,a;(a=i===t.f.serif&&l===t.f["sans-serif"])||(a=be()&&Ce(t,i,l)),a?r()-t.A>=t.w?be()&&Ce(t,i,l)&&(t.u===null||t.u.hasOwnProperty(t.a.c))?ae(t,t.v):ae(t,t.B):tt(t):ae(t,t.v)}function tt(t){setTimeout(s(function(){Oe(this)},t),50)}function ae(t,i){setTimeout(s(function(){R(this.g.a),R(this.h.a),R(this.j.a),R(this.m.a),i(this.a)},t),0)}function ne(t,i,l){this.c=t,this.a=i,this.f=0,this.m=this.j=!1,this.s=l}var Q=null;ne.prototype.g=function(t){var i=this.a;i.g&&b(i.f,[i.a.c("wf",t.c,j(t).toString(),"active")],[i.a.c("wf",t.c,j(t).toString(),"loading"),i.a.c("wf",t.c,j(t).toString(),"inactive")]),z(i,"fontactive",t),this.m=!0,Fe(this)},ne.prototype.h=function(t){var i=this.a;if(i.g){var l=P(i.f,i.a.c("wf",t.c,j(t).toString(),"active")),a=[],h=[i.a.c("wf",t.c,j(t).toString(),"loading")];l||a.push(i.a.c("wf",t.c,j(t).toString(),"inactive")),b(i.f,a,h)}z(i,"fontinactive",t),Fe(this)};function Fe(t){--t.f==0&&t.j&&(t.m?(t=t.a,t.g&&b(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),z(t,"active")):xe(t.a))}function Ae(t){this.j=t,this.a=new Qe,this.h=0,this.f=this.g=!0}Ae.prototype.load=function(t){this.c=new n(this.j,t.context||this.j),this.g=t.events!==!1,this.f=t.classes!==!1,it(this,new Ze(this.c,t),t)};function st(t,i,l,a,h){var p=--t.h==0;(t.f||t.g)&&setTimeout(function(){var c=h||null,m=a||null||{};if(l.length===0&&p)xe(i.a);else{i.f+=l.length,p&&(i.j=p);var S,g=[];for(S=0;S<l.length;S++){var x=l[S],D=m[x.c],B=i.a,Y=x;if(B.g&&b(B.f,[B.a.c("wf",Y.c,j(Y).toString(),"loading")]),z(B,"fontloading",Y),B=null,Q===null)if(window.FontFace){var Y=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ft=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Q=Y?42<parseInt(Y[1],10):!ft}else Q=!1;Q?B=new Pe(s(i.g,i),s(i.h,i),i.c,x,i.s,D):B=new ke(s(i.g,i),s(i.h,i),i.c,x,i.s,c,D),g.push(B)}for(S=0;S<g.length;S++)g[S].start()}},0)}function it(t,i,l){var a=[],h=l.timeout;$e(i);var a=et(t.a,l,t.c),p=new ne(t.c,i,h);for(t.h=a.length,i=0,l=a.length;i<l;i++)a[i].load(function(c,m,S){st(t,p,c,m,S)})}function Le(t,i){this.c=t,this.a=i}Le.prototype.load=function(t){function i(){if(p["__mti_fntLst"+a]){var c=p["__mti_fntLst"+a](),m=[],S;if(c)for(var g=0;g<c.length;g++){var x=c[g].fontfamily;c[g].fontStyle!=null&&c[g].fontWeight!=null?(S=c[g].fontStyle+c[g].fontWeight,m.push(new F(x,S))):m.push(new F(x))}t(m)}else setTimeout(function(){i()},50)}var l=this,a=l.a.projectId,h=l.a.version;if(a){var p=l.c.o;C(this.c,(l.a.api||"https://fast.fonts.net/jsapi")+"/"+a+".js"+(h?"?v="+h:""),function(c){c?t([]):(p["__MonotypeConfiguration__"+a]=function(){return l.a},i())}).id="__MonotypeAPIScript__"+a}else t([])};function Ee(t,i){this.c=t,this.a=i}Ee.prototype.load=function(t){var i,l,a=this.a.urls||[],h=this.a.families||[],p=this.a.testStrings||{},c=new J;for(i=0,l=a.length;i<l;i++)L(this.c,a[i],E(c));var m=[];for(i=0,l=h.length;i<l;i++)if(a=h[i].split(":"),a[1])for(var S=a[1].split(","),g=0;g<S.length;g+=1)m.push(new F(a[0],S[g]));else m.push(new F(a[0]));I(c,function(){t(m,p)})};function rt(t,i){t?this.c=t:this.c=ot,this.a=[],this.f=[],this.g=i||""}var ot="https://fonts.googleapis.com/css";function at(t,i){for(var l=i.length,a=0;a<l;a++){var h=i[a].split(":");h.length==3&&t.f.push(h.pop());var p="";h.length==2&&h[1]!=""&&(p=":"),t.a.push(h.join(p))}}function nt(t){if(t.a.length==0)throw Error("No fonts to load!");if(t.c.indexOf("kit=")!=-1)return t.c;for(var i=t.a.length,l=[],a=0;a<i;a++)l.push(t.a[a].replace(/ /g,"+"));return i=t.c+"?family="+l.join("%7C"),0<t.f.length&&(i+="&subset="+t.f.join(",")),0<t.g.length&&(i+="&text="+encodeURIComponent(t.g)),i}function lt(t){this.f=t,this.a=[],this.c={}}var De={latin:"BESbswy","latin-ext":"\xE7\xF6\xFC\u011F\u015F",cyrillic:"\u0439\u044F\u0416",greek:"\u03B1\u03B2\u03A3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},ht={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},pt={i:"i",italic:"i",n:"n",normal:"n"},ct=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function dt(t){for(var i=t.f.length,l=0;l<i;l++){var a=t.f[l].split(":"),h=a[0].replace(/\+/g," "),p=["n4"];if(2<=a.length){var c,m=a[1];if(c=[],m)for(var m=m.split(","),S=m.length,g=0;g<S;g++){var x;if(x=m[g],x.match(/^[\w-]+$/)){var D=ct.exec(x.toLowerCase());if(D==null)x="";else{if(x=D[2],x=x==null||x==""?"n":pt[x],D=D[1],D==null||D=="")D="4";else var B=ht[D],D=B||(isNaN(D)?"4":D.substr(0,1));x=[x,D].join("")}}else x="";x&&c.push(x)}0<c.length&&(p=c),a.length==3&&(a=a[2],c=[],a=a?a.split(","):c,0<a.length&&(a=De[a[0]])&&(t.c[h]=a))}for(t.c[h]||(a=De[h])&&(t.c[h]=a),a=0;a<p.length;a+=1)t.a.push(new F(h,p[a]))}}function _e(t,i){this.c=t,this.a=i}var ut={Arimo:!0,Cousine:!0,Tinos:!0};_e.prototype.load=function(t){var i=new J,l=this.c,a=new rt(this.a.api,this.a.text),h=this.a.families;at(a,h);var p=new lt(h);dt(p),L(l,nt(a),E(i)),I(i,function(){t(p.a,p.c,ut)})};function Re(t,i){this.c=t,this.a=i}Re.prototype.load=function(t){var i=this.a.id,l=this.c.o;i?C(this.c,(this.a.api||"https://use.typekit.net")+"/"+i+".js",function(a){if(a)t([]);else if(l.Typekit&&l.Typekit.config&&l.Typekit.config.fn){a=l.Typekit.config.fn;for(var h=[],p=0;p<a.length;p+=2)for(var c=a[p],m=a[p+1],S=0;S<m.length;S++)h.push(new F(c,m[S]));try{l.Typekit.load({events:!1,classes:!1,async:!0})}catch(g){}t(h)}},2e3):t([])};function je(t,i){this.c=t,this.f=i,this.a=[]}je.prototype.load=function(t){var i=this.f.id,l=this.c.o,a=this;i?(l.__webfontfontdeckmodule__||(l.__webfontfontdeckmodule__={}),l.__webfontfontdeckmodule__[i]=function(h,p){for(var c=0,m=p.fonts.length;c<m;++c){var S=p.fonts[c];a.a.push(new F(S.name,qe("font-weight:"+S.weight+";font-style:"+S.style)))}t(a.a)},C(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+A(this.c)+"/"+i+".js",function(h){h&&t([])})):t([])};var N=new Ae(window);N.a.c.custom=function(t,i){return new Ee(i,t)},N.a.c.fontdeck=function(t,i){return new je(i,t)},N.a.c.monotype=function(t,i){return new Le(i,t)},N.a.c.typekit=function(t,i){return new Re(i,t)},N.a.c.google=function(t,i){return new _e(i,t)};var le={load:s(N.load,N)};typeof define=="function"&&define.amd?define(function(){return le}):typeof ee!="undefined"&&ee.exports?ee.exports=le:(window.WebFont=le,window.WebFontConfig&&N.load(window.WebFontConfig))})()});var Ie=Pt(Be()),pe=class extends Phaser.Loader.File{constructor(e,s,r="google"){super(e,{type:"webfont",key:s.toString()});this.fontNames=Array.isArray(s)?s:[s],this.service=r}load(){let e={active:()=>{this.loader.nextFile(this,!0)}};switch(this.service){case"google":e.google={families:this.fontNames};break;default:throw new Error("Unsupported font service")}Ie.default.load(e)}},G=pe;function kt(o){var e=o[0]-(o[1]-(o[1]&1))/2,s=o[1];return[e,s]}function _(o,e,s){var r=kt([e,s]),n=o*(Math.sqrt(3)*r[0]+Math.sqrt(3)/2*r[1]),d=o*(3/2*r[1]);return bt(n,d)}function bt(o,e){return[(o+78)*1.85,(e+95)*1.6]}var Me=!1,w=0,T=1,k=2,O=3;actorCanJump={};function V(o){return actorCanJump[o]}function W(o,e){actorCanJump[o]=e}function U(o,e,s,r,n,d,u){d&&(r[1]=15);let y=_(o.hexHeight,r[0],r[1]),R=-.75;(e===o.player.player||s.startsWith("Enemy"))&&d&&n==T&&Math.round(e.x)-Math.round(y[0]===0)&&(y[0]-=64),e===o.player.player&&e.intro&&(y[0]+=6,y[1]+=290),(n==T||n==w)&&(R=-5);var b=o.hexHeight/2*3*R;actorCanJump[s]=!1;var P=new Phaser.Math.Vector2(e.x,e.y),A=new Phaser.Math.Vector2(y[0],y[1]),L=n==T||n==w?e.x+(y[0]-e.x)*.75:y[0],C=new Phaser.Math.Vector2(L,e.y+b/2),J=new Phaser.Math.Vector2(L,e.y+b/2);let E=new Phaser.Curves.CubicBezier(P,C,J,A);Me&&(o.bezierGraphics.y=0,o.bezierGraphics.clear(),o.bezierGraphics.lineStyle(3,16777215));var I={value:0,previousValue:0};e.scaleY=1.1,e.scaleX=.9;let M=o;o.tweens.add({targets:I,value:1,duration:d?500:320,callbackScope:o,onComplete:function(){actorCanJump[s]=!0,Me&&E.draw(o.bezierGraphics),u&&u(y),M.bonk||(e.scaleY=.8,e.scaleX=1.1,e.y+=7,setTimeout(()=>{e.scaleY=1,e.scaleX=1,e.y-=7},30)),d&&(e.setAlpha(1),e.scaleY=1,e.scaleX=1)},onUpdate:function(re,F){if(o.bonk)e.scaleY=1,e.scaleX=1;else{var X=E.getPoint(F.value),H=E.getPoint(F.previousValue);e.x+=X.x-H.x,e.y+=X.y-H.y,F.previousValue=F.value,d&&e.setAlpha(1-.75*F.value)}}})}var Ct=new Phaser.Events.EventEmitter,f=Ct;var ce=class{START_POS=[3,0];player;playerPos;DRSprite;DLSprite;URSprite;ULSprite;DRBSprite;DLBSprite;URBSprite;ULBSprite;DRBlinkSprite;DLBlinkSprite;LWingSprite;RWingSprite;shadowSprite;coloredTiles=new Map;elapsed=0;blinkDelay=1e3;isIntro=!1;constructor(e,s){this.isIntro=s,this.playerPos=Object.assign([],this.START_POS);let r=_(e.hexHeight,this.START_POS[0],this.START_POS[1]);this.player=e.add.container(r[0],r[1]),this.DRSprite=e.physics.add.sprite(0,0,"sprites","GJ-Bird").setOrigin(.5,.5).setScale(.25).setActive(1).setAlpha(1),this.DRSprite.setCircle(50).setOffset(78,70),this.LWingSprite=e.add.sprite(-10,-10,"sprites","wing").setOrigin(0,.5).setScale(.25).setAlpha(0).setActive(!1),this.RWingSprite=e.add.sprite(10,-10,"sprites","wing").setOrigin(0,.5).setScale(.25).setAlpha(0).setActive(!1),this.DLSprite=e.add.sprite(0,0,"sprites","GJ-Bird").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.URSprite=e.add.sprite(0,0,"sprites","GJ-Bird-back").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.ULSprite=e.add.sprite(0,0,"sprites","GJ-Bird-back").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.DRBSprite=e.add.sprite(0,0,"sprites","GJ-Bird-bonk").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.DLBSprite=e.add.sprite(0,0,"sprites","GJ-Bird-bonk").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.URBSprite=e.add.sprite(0,0,"sprites","GJ-Bird-back-bonk").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.ULBSprite=e.add.sprite(0,0,"sprites","GJ-Bird-back-bonk").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.DRBlinkSprite=e.add.sprite(0,0,"sprites","GJ-Bird-blink").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.DLBlinkSprite=e.add.sprite(0,0,"sprites","GJ-Bird-blink").setOrigin(.5,.5).setScale(.25).setAlpha(0).setActive(!1),this.shadowSprite=e.add.sprite(-4,18,"sprites","shadow").setOrigin(.5,.5).setScale(.25).setActive(!1),this.LWingSprite.flipX=!0,this.ULSprite.flipX=!0,this.DLSprite.flipX=!0,this.ULBSprite.flipX=!0,this.DLBSprite.flipX=!0,this.DLBlinkSprite.flipX=!0,this.player.add([this.DRSprite,this.DLSprite,this.URSprite,this.ULSprite,this.DRBSprite,this.DLBSprite,this.URBSprite,this.ULBSprite,this.DRBlinkSprite,this.DLBlinkSprite,this.shadowSprite]),this.player.setDepth(7),W("Player",!0)}updatePlayer(e,s,r){this.elapsed+=r,this.elapsed>=this.blinkDelay&&(this.blinkDelay=Math.floor(Math.random()*2e3)+1e3,this.elapsed=0,this.getActiveSprite()===this.DRSprite?(this.setSpriteActive(this.DRBlinkSprite,!0),this.setSpriteActive(this.DRSprite,!1),setTimeout(()=>{this.setSpriteActive(this.DRBlinkSprite,!1),this.setSpriteActive(this.DRSprite,!0)},100)):this.getActiveSprite()===this.DLSprite&&(this.setSpriteActive(this.DLBlinkSprite,!0),this.setSpriteActive(this.DLSprite,!1),setTimeout(()=>{this.setSpriteActive(this.DLBlinkSprite,!1),this.setSpriteActive(this.DLSprite,!0)},100)))}setActiveSprite(e){this.player.list.filter(s=>s.active).forEach(s=>{s.setActive(!1),s.setAlpha(0)}),e.setActive(!0),e.setAlpha(1)}setSpriteActive(e,s){this.player.list.filter(r=>r===e).forEach(r=>{r.setActive(s),r.setAlpha(s)})}setBonkSprite(){this.getActiveSprite()===this.DRSprite?this.setActiveSprite(this.DRBSprite):this.getActiveSprite()===this.DLSprite?this.setActiveSprite(this.DLBSprite):this.getActiveSprite()===this.URSprite?this.setActiveSprite(this.URBSprite):this.getActiveSprite()===this.ULSprite&&this.setActiveSprite(this.ULBSprite)}getActiveSprite(){return this.player.list.filter(e=>e!==this.shadowSprite&&e.active)[0]}resetPlayer(e,s){if(s){for(let[n,d]of this.coloredTiles.entries())d.sprite.destroy();this.coloredTiles.clear()}let r=_(e.hexHeight,this.START_POS[0],this.START_POS[1]);this.player.x=r[0],this.player.y=r[1],this.playerPos=Object.assign([],this.START_POS),this.player.setDepth(7),this.setActiveSprite(this.DRSprite),this.setSpriteActive(this.shadowSprite,!0),W("Player",!0)}LevelComplete(e){f.emit("pauseTimer"),e.levelComplete=!0,e.stagecompleteSound.play(),e.frozen&&e.thaw();let s=[16711680,16744192,16776960,65280,255,4915330,9371903],r=0,n=setInterval(()=>{for(let[d,u]of this.coloredTiles.entries())r=(r+1)%s.length,u.sprite.setTint(s[r]);r=(r+1)%s.length},100);setTimeout(()=>{clearInterval(n);for(let[d,u]of this.coloredTiles.entries())u.sprite.destroy();this.coloredTiles.clear(),this.resetPlayer(e,!0),e.nextLevel()},2e3)}checkLevelComplete(e,s){this.coloredTiles.size==28&&Array.from(this.coloredTiles.values()).every(r=>r.index===s)&&(W("Player",!1),this.LevelComplete(e))}updatePreviouslyJumpedOnTileColor(e,s,r,n){let d=s.index+(r?1:-1);if(!r&&d<0)s.sprite.destroy(),this.coloredTiles.delete(n);else{let u=e.currentLevel.successColors[d];s.index=d,s.tint=u,s.sprite.setTint(u),this.coloredTiles.set(n,s)}}determineDestinationTileColor(e,s){let r=e.map.getTileAt(s[0],s[1]),n=e.currentLevel.successColors.length-1,d=e.currentLevel.successColors[n];if(this.coloredTiles.has(r)){let u=this.coloredTiles.get(r);u.tint!==d?this.updatePreviouslyJumpedOnTileColor(e,u,!0,r):e.currentLevel.reJumpRevert&&this.updatePreviouslyJumpedOnTileColor(e,u,!1,r)}else{let u=_(e.hexHeight,s[0],s[1]),y=e.add.sprite(u[0]+(this.isIntro?5:0),u[1]+(this.isIntro?330:41),"successTile").setOrigin(.5,.5).setScale(1.6).setDepth(6).setAlpha(1).setActive(!0).setTint(e.currentLevel.successColors[0]);this.coloredTiles.set(r,{index:0,tint:e.currentLevel.successColors[0],sprite:y}),this.isIntro||(e.score+=25,f.emit("addScore",{score:e.score,lives:e.lives}))}this.checkLevelComplete(e,n)}fly(e,s,r){this.LWingSprite.setActive(!0).setAlpha(1),this.RWingSprite.setActive(!0).setAlpha(1),e.flySound.play(),setTimeout(()=>{this.player.isFlying=!0},250),U(e,this.player,"Player",this.playerPos,s,!1,n=>{if(W("Player",!1),!e.bonk){e.useWings(r),this.DRSprite.disableBody(!1,!1),s===w?(this.player.remove(this.ULSprite),this.player.add([this.RWingSprite,this.ULSprite,this.LWingSprite]),this.setSpriteActive(this.URSprite,!1),this.setSpriteActive(this.ULSprite,!0)):(this.player.remove(this.URSprite),this.player.add([this.LWingSprite,this.URSprite,this.RWingSprite]),this.setSpriteActive(this.URSprite,!0),this.setSpriteActive(this.ULSprite,!1));var d={value:0,previousValue:0};let y=_(e.hexHeight,this.START_POS[0],this.START_POS[1]),R=new Phaser.Math.Vector2(n[0],n[1]),b=new Phaser.Math.Vector2(y[0],y[1]),P=new Phaser.Math.Vector2(y[0]+(n[0]-y[0]),n[1]-200),A=new Phaser.Math.Vector2(y[0]+(n[0]-y[0])/2,n[1]-300),L=new Phaser.Curves.CubicBezier(R,P,A,b);e.tweens.add({targets:d,value:1,duration:1500,ease:"sine.inout",callbackScope:e,onUpdate:function(J,E){var I=L.getPoint(E.value),M=L.getPoint(E.previousValue);C.player.x+=I.x-M.x,C.player.y+=I.y-M.y,E.previousValue=E.value},onComplete:function(){C.resetPlayer(e,!1),C.DRSprite.enableBody(),C.player.isFlying=!1,C.player.remove([C.RWingSprite,C.LWingSprite]),C.determineDestinationTileColor(e,C.START_POS)}});var u={value:-35,previousValue:0};let C=this;e.tweens.add({targets:u,value:15,duration:30,ease:"expo.inout",callbackScope:e,loop:-1,yoyo:!0,onUpdate:function(J,E){var I=E.value,M=E.previousValue;C.LWingSprite.angle+=I-M,C.RWingSprite.angle-=I-M,E.previousValue=E.value}})}})}jumpOff(e,s){e.cameras.main.stopFollow(),(s==T||s==w)&&setTimeout(()=>this.player.setDepth(1),100),this.DRSprite.disableBody(!1,!1),e.jumpoffSound.play(),U(e,this.player,"Player",this.playerPos,s,!0,r=>{e.loseLife(),e.bonk=!0,f.emit("pauseTimer"),e.gameOver||setTimeout(()=>{e.reset(!1),this.DRSprite.enableBody()},1e3)})}jumpToNextCube(e,s){e.jumpSound.play(),U(e,this.player,"Player",this.playerPos,s,!1,r=>{e.bonk||(this.determineDestinationTileColor(e,this.playerPos),this.setSpriteActive(this.shadowSprite,!0))})}Jump(e,s){if(V("Player")&&!e.bonk){let r;switch(this.setActiveSprite(this.shadowSprite),this.player.list.filter(n=>n.active).forEach(n=>{n.setActive(!1),n.setAlpha(0)}),s){case w:this.playerPos[0]+=this.playerPos[1]%2,this.playerPos[1]-=1,this.setActiveSprite(this.URSprite);break;case T:this.playerPos[0]-=1-this.playerPos[1]%2,this.playerPos[1]-=1,this.setActiveSprite(this.ULSprite);break;case k:this.playerPos[0]+=this.playerPos[1]%2,this.playerPos[1]+=1,this.setActiveSprite(this.DRSprite);break;case O:this.playerPos[0]-=1-this.playerPos[1]%2,this.playerPos[1]+=1,this.setActiveSprite(this.DLSprite);break}if(r=e.map.getTileAt(this.playerPos[0],this.playerPos[1]),r==null)if(e.wings){let n=`${this.playerPos[0]},${this.playerPos[1]}`;e.wings.get(n)?this.fly(e,s,n):this.jumpOff(e,s)}else this.jumpOff(e,s);else this.jumpToNextCube(e,s)}}},te=ce;var se=Levels={0:{color:2267613,wings:{left:[[0,3]],right:[[5,3]]},successColors:[5627426]},1:{color:2271812,wings:{left:[[0,3]],right:[[5,3]]},successColors:[16748544]},2:{color:11145857,wings:{left:[[0,3]],right:[[5,2],[6,4]]},successColors:[16711935,16773632],hasHob:!0},3:{color:12290065,wings:{left:[[0,3]],right:[[5,3]]},successColors:[10035967,12320563,16724096]}};var de=class extends Phaser.Scene{constructor(){super({key:"GameUI",active:!1});this.i=0,this.timer=0,this.elapsedSeconds=0,this.FONT="Bubblegum Sans",this.FONT_SIZE="32px",this.isThawing=!1,this.BLUE=Phaser.Display.Color.ValueToColor("#4444FF"),this.RED=Phaser.Display.Color.ValueToColor("#FF4444")}preload(){this.load.addFile(new G(this.load,this.FONT)),this.load.image("cube","assets/maps/cube-grey.png"),this.load.image("successTile","assets/maps/cube-top-grey.png"),this.load.image("heart","assets/sprites/heart.png"),this.load.image("arrow","assets/sprites/arrow_left.png")}create(){f.on("levelChanged",this.onLevelChanged,this),f.on("die",this.onDie,this),f.on("fullReset",this.resetTimer,this),f.on("pauseTimer",this.pauseTimer,this),f.on("freeze",this.startThawCountdown,this),f.on("thaw",this.thaw,this),f.on("addScore",this.addScore,this),this.levelLabelText=this.add.text(20,3,"LEVEL:",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("levelLabelText"),this.levelText=this.add.text(200,3,"1",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("levelLabelText"),this.scoreLabelText=this.add.text(20,56,"SCORE:",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("scoreLabelText"),this.scoreText=this.add.text(200,56,"0",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("scoreLabelText"),this.livesLabelText=this.add.text(523,3,"LIVES:",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("livesLabelText"),this.goalText=this.add.text(520,56,"GOAL:",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("livesLabelText"),this.scoreLabelText.setStroke("#000",4),this.scoreText.setStroke("#000",4),this.livesLabelText.setStroke("#000",4),this.goalText.setStroke("#000",4),this.levelLabelText.setStroke("#000",4),this.levelText.setStroke("#000",4),this.livesContainer=this.add.container(625,10),this.livesContainer.setX(625-this.livesContainer.width/2),this.livesContainer.setY(10),this.livesContainer.setDepth(10),this.goalContainer=this.add.container(600,50),this.goalSprite=this.add.sprite(70,0,"cube",0).setOrigin(0,0).setScale(1),this.goalTopSprite=this.add.sprite(63,-10,"successTile",0).setOrigin(0,0).setScale(1),this.goalContainer.add([this.goalSprite,this.goalTopSprite]),this.leftArrowSprite=this.add.sprite(25,8,"arrow",0).setOrigin(0,0).setScale(.5).setFlipX(!0),this.rightArrowSprite=this.add.sprite(135,8,"arrow",0).setOrigin(0,0).setScale(.5),this.goalContainer.add([this.leftArrowSprite,this.rightArrowSprite]);var e={value:0,previousValue:0};this.tweens.add({targets:e,value:15,duration:600,callbackScope:this,loop:-1,ease:"cubic.in",yoyo:!0,onUpdate:function(s,r){var n=r.value,d=r.previousValue;this.leftArrowSprite.x+=n-d,this.rightArrowSprite.x-=n-d,r.previousValue=r.value}}),this.milliseconds=0,this.timer=this.time.addEvent({delay:1e3,callback:this.addSecond,callbackScope:this,loop:!0}),this.events.on(Phaser.Scenes.Events.SHUTDOWN,()=>{f.off("levelChanged",this.onLevelChanged,this),f.off("die",this.onDie,this),f.off("fullReset",this.resetTimer,this),f.off("pauseTimer",this.pauseTimer,this),f.off("resumeTimer",this.resumeTimer,this),f.off("restart",this.resetUI,this),f.off("freeze",this.startThawCountdown,this),f.off("thaw",this.thaw,this),f.off("addScore",this.addScore,this)}),this.resetUI()}onDie(){this.livesContainer.removeAt(0,!0),this.thaw()}addScore(e){this.scoreText.setText(e.score)}resetUI(){for(var e=0;e<3;e++){var s=this.add.sprite(0,0,"heart").setOrigin(0,0).setScale(.5);s.setX(100-e*40-5),s.setY(-5),this.livesContainer.add(s)}this.scoreText.setText("0")}updateTimer(){this.milliseconds=Math.trunc(this.timer.getElapsed())}addSecond(){this.elapsedSeconds+=1}startThawCountdown(){this.thawing=!0;let e=Math.floor(this.elapsedSeconds%60),s=this.milliseconds%1e3;this.thawStart=e+s/1e3,this.thawText=this.add.text(30,300,"4.0",{fontFamily:'"'+this.FONT+'"',fill:"#4444FF",fontSize:"80px"}).setName("thawText"),this.thawText.setStroke("#000",4)}thaw(){this.thawing&&(this.thawing=!1,this.thawText.destroy())}update(){if(!this.timer.paused&&(this.updateTimer(),this.thawing)){let e=Math.floor(this.elapsedSeconds%60),s=this.milliseconds%1e3,r=e+s/1e3,n=4-(r-this.thawStart);if(n.toFixed(1)>0){this.thawText.setText(n.toFixed(1));let d=Phaser.Display.Color.Interpolate.ColorWithColor(this.RED,this.BLUE,40,parseInt(n.toFixed(1)*10)),u=Phaser.Display.Color.RGBToString(d.r,d.g,d.b,255,"#");this.thawText.setFill(u)}}}pauseTimer(){this.timer.paused=!0}resumeTimer(){this.timer.paused=!1}resetTimer(){this.milliseconds=0,this.elapsedSeconds=0,this.timer.paused=!1}onLevelChanged(e){this.goalSprite.setTint(e.level.color),this.goalTopSprite.setTint(e.level.successColors[e.level.successColors.length-1]),this.levelText.setText(e.levelCounter+1),this.scoreText.setText(e.score);for(var s=0;s<3-e.lives;s++)this.livesContainer.removeAt(0,!0)}},Ue=de;var ue=class extends Phaser.Scene{constructor(){super({key:"Clouds",active:!1})}preload(){this.load.spritesheet("clouds","assets/sprites/clouds.png",{frameWidth:128,frameHeight:128}),this.load.image("sun","assets/sprites/sun.png"),this.load.image("sunSparkle","assets/sprites/sun_sparkle.png")}create(){this.sparkleSprite=this.add.sprite(200,180,"sunSparkle").setScale(.5).setDepth(0).setAlpha(.75),this.sunSprite=this.add.sprite(200,180,"sun").setScale(.5).setDepth(1),this.tweens.add({targets:this.sparkleSprite,alpha:{from:.25,to:.5},angle:{from:0,to:90},duration:1e4,ease:"Sine.easeInOut",repeat:-1,yoyo:!0}),this.clouds=this.add.group(),this.clouds.createMultiple({key:"clouds",frame:0,repeat:8,setXY:{x:0,y:0,stepX:128}}),this.clouds.children.iterate(e=>{e.setAlpha(1),e.setScale(1.5),e.setDepth(2),e.setFrame(Phaser.Math.Between(0,7)),e.setY(Phaser.Math.Between(0,1024)),e.xSpeed=Phaser.Math.Between(10,25)})}update(e,s){this.clouds.children.iterate(r=>{let n=s/r.xSpeed;r.setX(r.x+n),r.x>768+80&&(r.x=-64,r.y=Phaser.Math.Between(0,1024))})}},We=ue;function Ne(o){o.input.addPointer(1),o.input.keyboard.on("keydown-W",()=>{o.player.Jump(o,w)}),o.input.keyboard.on("keydown-Q",()=>{o.player.Jump(o,T)}),o.input.keyboard.on("keydown-A",()=>{o.player.Jump(o,O)}),o.input.keyboard.on("keydown-S",()=>{o.player.Jump(o,k)})}clicked=!1;jumped=!1;touchDeltaX=0;touchDeltaY=0;swipeDirection=[];function Ge(o){if(o.input.activePointer.isDown){clicked=!0;let e=Math.abs(o.input.activePointer.x-touchDeltaX),s=Math.abs(o.input.activePointer.y-touchDeltaY);if(e>=25&&swipeDirection.length==0&&(o.input.activePointer.x<touchDeltaX?swipeDirection.push("LEFT"):o.input.activePointer.x>touchDeltaX&&touchDeltaX!=0?swipeDirection.push("RIGHT"):(touchDeltaX=0,swipeDirection=[]),touchDeltaX=o.input.activePointer.x),s>=25&&swipeDirection.length==1&&(o.input.activePointer.y>touchDeltaY&&touchDeltaY!=0?swipeDirection.push("DOWN"):o.input.activePointer.y<touchDeltaY&&touchDeltaY!=0?swipeDirection.push("UP"):(touchDeltaY=0,swipeDirection=[]),touchDeltaY=o.input.activePointer.y),swipeDirection.length==2&&!jumped){switch(jumped=!0,swipeDirection[0]){case"LEFT":switch(swipeDirection[1]){case"UP":o.player.Jump(o,T);break;case"DOWN":o.player.Jump(o,O);break}break;case"RIGHT":switch(swipeDirection[1]){case"UP":o.player.Jump(o,w);break;case"DOWN":o.player.Jump(o,k);break}break}swipeDirection=[]}else swipeDirection=[]}else{if(touchDeltaX=0,touchDeltaY=0,clicked&&!o.gameOver&&!jumped){let e=new Phaser.Math.Vector2(o.input.activePointer.x/1.3+87,o.input.activePointer.y/1.3-42),s=new Phaser.Math.Vector2(o.player.player.x,o.player.player.y),r=Phaser.Math.RadToDeg(Phaser.Math.Angle.BetweenPoints(e,s));r<0&&(r=360+r),r>=0&&r<90?o.player.Jump(o,T):r>=90&&r<180?o.player.Jump(o,w):r>=180&&r<270?o.player.Jump(o,k):r>=270&&r<360&&o.player.Jump(o,O)}clicked=!1,jumped=!1}}var v={COILY:0,HOB:1,NOB:2};globalEnemyId=0;var fe=class{enemy;type;enemyPos;enemySprite;shadowSprite;jumpDelay;jumpTimeOut=0;id;collider;startWorldPos;allowed_jumps;constructor(e,s,r){switch(this.type=s,this.spriteSheet="",s){case v.COILY:this.spriteSheet="coily",this.allowed_jumps=[T,w],this.jumpDelay=1e3;break;case v.HOB:this.spriteSheet="frog",this.allowed_jumps=[O,k],this.jumpDelay=1250;break}this.enemyPos=Object.assign([],r),this.startWorldPos=_(e.hexHeight,r[0],r[1]),this.enemy=e.add.container(this.startWorldPos[0],this.startWorldPos[1]),this.enemySprite=e.physics.add.sprite(0,this.type===v.COILY?5:10,this.spriteSheet).setOrigin(.5,.5).setScale(this.type===v.COILY?.25:.7),this.enemySprite.setCircle(v.COILY?80:25),this.type===v.COILY?this.enemySprite.setOffset(50,50):this.enemySprite.setOffset(35,50),this.shadowSprite=e.add.sprite(-4,18,"sprites","shadow").setOrigin(.5,.5).setScale(.25),this.id="Enemy"+globalEnemyId++,this.enemy.add([this.enemySprite,this.shadowSprite]),this.enemy.setDepth(7),this.enterWorld(e);let n=this;this.collider=e.physics.add.overlap(e.player.player.list[0],this.enemySprite,function(d,u){n.handlePlayerEnemyCollision(e,d,u)})}vaporize(e){this.enemySprite.body.destroy(),this.enemySprite.body=null,this.enemySprite.destroy(),this.shadowSprite.destroy(),this.collider.destroy(),this.enemy.destroy(),e.killEnemy(this)}handlePlayerEnemyCollision(e,s,r){!e.bonk&&!e.frozen&&(this.dizzyStars(e),e.player.setBonkSprite(),f.emit("pauseTimer"),e.loseLife(),e.bonkSound.play(),e.twitterSound.play(),e.owSound.play(),e.bonk=!0,e.gameOver||setTimeout(()=>{this.vaporize(e),e.reset(!1)},1e3))}dizzyStars(e){let s=new Phaser.Geom.Ellipse(0,0,50,20),r=e.add.particles(e.player.player.x,e.player.player.y-20,"star",{blendMode:"NORMAL",lifespan:250,frequency:40,maxParticles:32,loop:!1,rotate:{ease:"Quad.easeOut",min:-360,max:30},scale:{start:.2,end:.01},onComplete:function(){r.destroy()}}).setDepth(10);r.stop(),r.addEmitZone({type:"edge",source:s,quantity:8,total:32}),r.start(0,800)}enterWorld(e){W(this.id,!0)}setActiveSprite(e){this.enemy.list.filter(s=>s.active).forEach(s=>{s.setActive(!1),s.setAlpha(0)}),e.setActive(!0),e.setAlpha(1)}setSpriteActive(e,s){this.enemy.list.filter(r=>r===e).forEach(r=>{r.setActive(s),r.setAlpha(s)})}update(e,s,r){e.bonk||(this.jumpTimeOut+=r,this.jumpTimeOut>this.jumpDelay&&(this.jumpTimeOut=0,this.Jump(e,this.allowed_jumps[Math.floor(Math.random()*this.allowed_jumps.length)])))}destroy=()=>{this.removeCollider();for(let e=0;e<this.enemy.list.length;e++)this.enemy.removeAt(e,!0);this.enemy.destroy(),delete this};removeCollider(){this.enemySprite&&this.enemySprite.body&&this.enemySprite.body.destroy()}playEnemyJumpSound(e){switch(this.type){case v.COILY:e.coilyjumpSound.play();break;case v.HOB:case v.NOB:e.ribbitSound.play();break}}setEnemyJumpSprite(e){switch(e){case T:this.type===v.COILY&&(this.enemySprite.setOffset(50,100),this.enemySprite.setFrame("coily_back_jump")),this.enemySprite.flipX=!1;break;case w:this.type===v.COILY&&(this.enemySprite.setOffset(50,100),this.enemySprite.setFrame("coily_back_jump")),this.enemySprite.flipX=!0;break;case O:this.type===v.COILY?(this.enemySprite.setOffset(50,100),this.enemySprite.setFrame("coily_front_jump"),this.enemySprite.flipX=!1):this.type===v.HOB&&(this.enemySprite.setFrame("frog_jump"),this.enemySprite.flipX=!0);break;case k:this.type===v.COILY?(this.enemySprite.setOffset(50,100),this.enemySprite.setFrame("coily_front_jump"),this.enemySprite.flipX=!0):this.type===v.HOB&&(this.enemySprite.setFrame("frog_jump"),this.enemySprite.flipX=!1);break}}setEnemyRestSprite(e){switch(e){case T:this.type===v.COILY&&(this.enemySprite.setOffset(50,50),this.enemySprite.setFrame("coily_back")),this.enemySprite.flipX=!1;break;case w:this.type===v.COILY&&(this.enemySprite.setOffset(50,50),this.enemySprite.setFrame("coily_back")),this.enemySprite.flipX=!0;break;case O:this.type===v.COILY?(this.enemySprite.setOffset(50,50),this.enemySprite.setFrame("coily_front"),this.enemySprite.flipX=!1):this.type===v.HOB&&(this.enemySprite.setFrame("frog"),this.enemySprite.flipX=!0);break;case k:this.type===v.COILY?(this.enemySprite.setOffset(50,50),this.enemySprite.setFrame("coily_front"),this.enemySprite.flipX=!0):this.type===v.HOB&&(this.enemySprite.setFrame("frog"),this.enemySprite.flipX=!1);break}}determineJumpDirection(e){switch(this.type){case v.COILY:let s=new Phaser.Math.Vector2(this.enemy.x,this.enemy.y),r=new Phaser.Math.Vector2(e.player.player.x,e.player.player.y),n=Phaser.Math.RadToDeg(Phaser.Math.Angle.BetweenPoints(s,r));if(n<0&&(n=360+n),n>=0&&n<90)return k;if(n>=90&&n<180)return O;if(n>=180&&n<270)return e.player.player.isFlying?w:T;if(n>=270&&n<360)return e.player.player.isFlying?T:w;break;case v.HOB:return this.allowed_jumps[Math.floor(Math.random()*this.allowed_jumps.length)]}}determineDestinationTileColor(e,s){let r=e.map.getTileAt(s[0],s[1]);if(e.player.coloredTiles.has(r)){let n=e.player.coloredTiles.get(r);e.player.updatePreviouslyJumpedOnTileColor(e,n,!1,r)}}Jump(e){let s=this.determineJumpDirection(e);if(V(this.id)){let r;switch(this.setSpriteActive(this.shadowSprite,!1),s){case w:this.enemyPos[0]+=this.enemyPos[1]%2,this.enemyPos[1]-=1;break;case T:this.enemyPos[0]-=1-this.enemyPos[1]%2,this.enemyPos[1]-=1;break;case k:this.enemyPos[0]+=this.enemyPos[1]%2,this.enemyPos[1]+=1;break;case O:this.enemyPos[0]-=1-this.enemyPos[1]%2,this.enemyPos[1]+=1;break}r=e.map.getTileAt(this.enemyPos[0],this.enemyPos[1]),r==null?(this.removeCollider(e),this.setEnemyJumpSprite(s),(s==T||s==w)&&setTimeout(()=>this.enemy.setDepth(1),100),U(e,this.enemy,this.id,this.enemyPos,s,!0,n=>{e.killEnemy(this)})):(this.playEnemyJumpSound(e),this.setEnemyJumpSprite(s),U(e,this.enemy,this.id,this.enemyPos,s,!1,n=>{this.setSpriteActive(this.shadowSprite,!0),e.bonk||(this.setEnemyRestSprite(s),this.type===v.HOB&&this.determineDestinationTileColor(e,this.enemyPos))}))}}},Je=fe;START_POS=[[2,1],[3,1]];ROCK_ALLOWED_JUMPS=[O,k];ROCK_TYPE={PURPLE:0,RED:1,BLUE:2};globalId=0;var ye=class{rock;type;rockPos;rockSprite;shadowSprite;jumpDelay=1250;jumpTimeOut=0;id;collider;startWorldPos;constructor(e){let s=Phaser.Math.Between(0,10);this.type=s<2?ROCK_TYPE.BLUE:s>3?ROCK_TYPE.PURPLE:ROCK_TYPE.RED,this.rockPos=Object.assign([],START_POS[Math.floor(Math.random()*START_POS.length)]),this.startWorldPos=_(e.hexHeight,this.rockPos[0],this.rockPos[1]);let r=e.add.sprite(this.startWorldPos[0],this.startWorldPos[1]+44,"drop-target").setOrigin(.5,.5).setScale(1.5).setAlpha(0).setTint(this.type===ROCK_TYPE.BLUE?255:16711680).setDepth(7),n=this;e.tweens.add({targets:r,alpha:1,duration:500,ease:"ease.out",yoyo:!1,repeat:0,callbackScope:e,onComplete:function(){r.destroy(),e.bonk||(n.rock=e.add.container(n.startWorldPos[0],n.startWorldPos[1]-200),n.rockSprite=e.physics.add.sprite(0,n.type===ROCK_TYPE.PURPLE||n.type===ROCK_TYPE.BLUE?10:8,"sprites",n.type===ROCK_TYPE.PURPLE?"rock-purple":n.type===ROCK_TYPE.RED?"rock-red":"rock-blue").setOrigin(.5,.5).setScale(n.type===ROCK_TYPE.RED?.2:.18).setActive(1).setAlpha(n.type===ROCK_TYPE.BLUE?.75:1),n.rockSprite.setCircle(80),n.rockSprite.setOffset(50,50),n.shadowSprite=e.add.sprite(-4,18,"sprites","shadow").setOrigin(.5,.5).setScale(.25).setActive(!1).setAlpha(0),n.id="Rock"+globalId++,n.rock.add([n.rockSprite,n.shadowSprite]),n.rock.setDepth(7),n.collider=e.physics.add.overlap(e.player.player.list[0],n.rockSprite,function(d,u){n.handlePlayerRockCollision(e,d,u)}),n.drop(e))}})}vaporize(e){this.rockSprite.body.destroy(),this.rockSprite.body=null,this.rockSprite.destroy(),this.shadowSprite.destroy(),this.collider.destroy(),this.rock.destroy(),e.killRock(this)}handlePlayerRockCollision(e,s,r){!e.bonk&&!e.frozen&&(this.type===ROCK_TYPE.BLUE?(e.freeze(),this.vaporize(e)):(this.dizzyStars(e),e.player.setBonkSprite(),f.emit("pauseTimer"),e.loseLife(),e.bonkSound.play(),e.twitterSound.play(),e.owSound.play(),e.bonk=!0,e.gameOver||setTimeout(()=>{e.reset(!1)},1e3)))}dizzyStars(e){let s=new Phaser.Geom.Ellipse(0,0,50,20),r=e.add.particles(e.player.player.x,e.player.player.y-20,"star",{blendMode:"NORMAL",lifespan:250,frequency:40,maxParticles:32,loop:!1,rotate:{ease:"Quad.easeOut",min:-360,max:30},scale:{start:.2,end:.01},onComplete:function(){r.destroy()}}).setDepth(10);r.stop(),r.addEmitZone({type:"edge",source:s,quantity:8,total:32}),r.start(0,800)}drop(e){var s=new Phaser.Math.Vector2(this.startWorldPos[0],this.startWorldPos[1]),r=new Phaser.Math.Vector2(this.startWorldPos[0],this.startWorldPos[1]+200);let n=new Phaser.Curves.Line(s,r);var d={value:0,previousValue:0};let u=this.rock,y=this.shadowSprite,R=this.id;y.y=218,e.tweens.add({targets:d,value:1,duration:500,ease:"bounce.out",callbackScope:e,onComplete:function(){W(R,!0),y.setAlpha(1)},onUpdate:function(b,P){if(!e.bonk){var A=n.getPoint(P.value),L=n.getPoint(P.previousValue);u.x+=A.x-L.x,u.y+=A.y-L.y,y.y-=A.y-L.y,y.setAlpha(1-y.y/218),P.previousValue=P.value}}})}setActiveSprite(e){this.rock.list.filter(s=>s.active).forEach(s=>{s.setActive(!1),s.setAlpha(0)}),e.setActive(!0),e.setAlpha(1)}setSpriteActive(e,s){this.rock.list.filter(r=>r===e).forEach(r=>{r.setActive(s),r.setAlpha(s)})}coilyEggExplode(e){e.addEnemy(v.COILY,this.rockPos);let s=e.add.particles(this.rock.x+5,this.rock.y-3,"shell",{lendMode:"ADD",lifespan:1500,frequency:1,maxParticles:20,loop:!1,scale:{start:.5,end:.25},angle:{min:0,max:360},alpha:{start:1,end:0},rotate:{ease:"Quad.easeOut",min:-360,max:1280},gravityY:500,speed:{min:100,max:200,ease:"Quint.easeIn"}}).setDepth(10);s.stop(),s.start(0,800)}hatchCoily(e){let s=this.rock,r=this.shadowSprite,n=this.rock.y,d=this;var u={value:-5,previousValue:0};let y=e.tweens.add({targets:u,value:5,duration:30,ease:"linear",yoyo:!0,repeat:7,callbackScope:e,onUpdate(R,b){var P=b.value,A=b.previousValue;s.x+=P-A,s.y=n-Phaser.Math.Between(0,5),r.x+=P-A,b.previousValue=b.value},onComplete:function(){d.coilyEggExplode(e),e.coilyhatchSound.play(),e.killRock(d)}})}update(e,s,r){if(!e.bonk){this.jumpTimeOut+=r;let n=this;this.jumpTimeOut>this.jumpDelay&&(this.jumpTimeOut=0,this.type===ROCK_TYPE.RED&&this.rockPos[1]==6?this.hatchCoily(e):this.Jump(e,ROCK_ALLOWED_JUMPS[Math.floor(Math.random()*ROCK_ALLOWED_JUMPS.length)]))}}destroy=()=>{if(this.removeCollider(),this.rock){for(let e=0;e<this.rock.list.length;e++)this.rock.removeAt(e,!0);this.rock.destroy()}delete this};removeCollider(){this.rockSprite&&this.rockSprite.body&&this.rockSprite.body.destroy()}Jump(e,s){if(V(this.id)){let r;this.setSpriteActive(this.shadowSprite,!1);let n=Object.assign([],this.rockPos);switch(s){case w:this.rockPos[0]+=this.rockPos[1]%2,this.rockPos[1]-=1;break;case T:this.rockPos[0]-=1-this.rockPos[1]%2,this.rockPos[1]-=1;break;case k:this.rockPos[0]+=this.rockPos[1]%2,this.rockPos[1]+=1;break;case O:this.rockPos[0]-=1-this.rockPos[1]%2,this.rockPos[1]+=1;break}r=e.map.getTileAt(this.rockPos[0],this.rockPos[1]),r==null?(this.removeCollider(e),U(e,this.rock,this.id,this.rockPos,s,!0,d=>{e.killRock(this)})):(this.type===ROCK_TYPE.PURPLE?e.rockjumpSound.play():e.coilyrockjumpSound.play(),U(e,this.rock,this.id,this.rockPos,s,!1,d=>{this.setSpriteActive(this.shadowSprite,!0)}))}}},ze=ye;var me="Bubblegum Sans",Se=class extends Phaser.Scene{constructor(){super({key:"GameOver",active:!1});this.i=0,this.timer=0}preload(){this.load.addFile(new G(this.load,me))}create(){this.hsv=Phaser.Display.Color.HSVColorWheel(),this.timer=0,this.foregroundText=this.add.text(130,220,`Game
  Over`,{fontFamily:'"'+me+'"',fontSize:"200px",fill:"#transparent"}),this.foregroundText.angle=0,this.foregroundText.setStroke("#fff",50),this.gameOverText=this.add.text(130,220,`Game
  Over`,{fontFamily:'"'+me+'"',fontSize:"200px",fill:"#fff"}),this.gameOverText.angle=0,this.gameOverText.setShadow(4,4,"#000000",10,!1,!0),this.gameOverText.setStroke("transparent",50),this.input.keyboard.on("keydown",function(e){this.timer>3500&&!this.restarted&&this.restart()},this),this.container=this.add.container(0,0),this.container.add([this.foregroundText,this.gameOverText]),this.input.addPointer(1),this.restarted=!1}restart=()=>{this.restarted=!0,this.scene.stop("Game"),this.scene.stop("GameUI"),this.scene.stop("Clouds"),this.scene.start("LevelIntro",{levelCounter:0})};update(e,s){this.timer+=s;let r=this.hsv[Math.round(this.i)].color,n=this.hsv[359-Math.round(this.i)].color;this.gameOverText.setTint(r,r,n,n),this.container.setAlpha(this.timer/1e3),this.i+=s/30,this.i>=359&&(this.i=0),this.timer>3500&&this.input.activePointer.isDown&&!this.restarted&&(this.input.activePointer.isDown=!1,this.restart())}},Ye=Se;function Ve(o){o.bonkSound=o.sound.add("bonk"),o.jumpSound=o.sound.add("jump"),o.rockjumpSound=o.sound.add("rockjump"),o.flySound=o.sound.add("fly"),o.gameoverSound=o.sound.add("gameover"),o.coilyrockjumpSound=o.sound.add("coilyrockjump"),o.jumpoffSound=o.sound.add("jumpoff"),o.thudSound=o.sound.add("thud"),o.thumpSound=o.sound.add("thump"),o.twitterSound=o.sound.add("twitter"),o.owSound=o.sound.add("ow"),o.stagecompleteSound=o.sound.add("stagecomplete"),o.coilyhatchSound=o.sound.add("coilyhatch"),o.freezeSound=o.sound.add("freeze"),o.coilyjumpSound=o.sound.add("coilyjump"),o.ribbitSound=o.sound.add("ribbit"),o.sound.locked&&o.sound.once("unlocked",()=>{})}var ve=class extends Phaser.Scene{controls;elapsed=0;spawnDelay=1250;lives=3;score=0;levelComplete=!1;hexHeight;gameOver=!1;currentLevel={};levelCounter=0;constructor(){super({key:"Game",physics:{arcade:{debug:!1},matter:{debug:!1}},active:!1})}init(e){this.levelCounter=e.levelCounter}preload(){this.purgeTexture("map-tiles"),this.purgeTexture("sprites"),this.purgeTexture("coily"),this.purgeTexture("frog"),this.load.tilemapTiledJSON("map","assets/maps/gj-bird-tiled.json"),this.load.multiatlas("map-tiles","assets/maps/map-tiles.json","assets/maps"),this.load.multiatlas("sprites","assets/sprites/gj_bird.json","assets/sprites"),this.load.multiatlas("coily","assets/sprites/coily.json","assets/sprites"),this.load.multiatlas("frog","assets/sprites/frog.json","assets/sprites"),this.load.image("ice-cube","assets/maps/cube-ice.png"),this.load.image("drop-target","assets/sprites/drop-target.png"),this.load.image("star","assets/particles/star.png"),this.load.image("shell","assets/particles/shell.png"),this.load.audio("bonk","assets/sounds/bonk.mp3"),this.load.audio("jump","assets/sounds/jump.mp3"),this.load.audio("rockjump","assets/sounds/rockjump.mp3"),this.load.audio("fly","assets/sounds/fly.mp3"),this.load.audio("gameover","assets/sounds/gameover.mp3"),this.load.audio("coilyrockjump","assets/sounds/coilyrockjump.mp3"),this.load.audio("jumpoff","assets/sounds/jumpoff.mp3"),this.load.audio("thud","assets/sounds/thud.mp3"),this.load.audio("thump","assets/sounds/thump.mp3"),this.load.audio("twitter","assets/sounds/twitter.mp3"),this.load.audio("ow","assets/sounds/oww.mp3"),this.load.audio("stagecomplete","assets/sounds/stagecomplete.mp3"),this.load.audio("coilyhatch","assets/sounds/coilyhatch.mp3"),this.load.audio("freeze","assets/sounds/freeze.mp3"),this.load.audio("coilyjump","assets/sounds/coilyjump.mp3"),this.load.audio("ribbit","assets/sounds/ribbit.mp3")}purgeTexture(e){this.textures.exists(e)&&this.textures.remove(e)}setupLevel=()=>{this.currentLevel=se[this.levelCounter],this.layer.forEachTile(e=>{e.tint=this.currentLevel.color}),this.currentLevel.wings.left.forEach(e=>{let s=_(this.hexHeight,e[0],e[1]),r=this.add.container(s[0],s[1]+40),n=this.add.sprite(-28,-10,"sprites","wing").setOrigin(.5,.5).setScale(.3).setFlipX(!0),d=this.add.sprite(28,-10,"sprites","wing").setOrigin(.5,.5).setScale(.3);r.add([n,d]),r.setAngle(-25),this.wings.set(`${e[0]},${e[1]}`,r)}),this.currentLevel.wings.right.forEach(e=>{let s=_(this.hexHeight,e[0],e[1]),r=this.add.container(s[0],s[1]+40),n=this.add.sprite(-28,-10,"sprites","wing").setOrigin(.5,.5).setScale(.3).setFlipX(!0),d=this.add.sprite(28,-10,"sprites","wing").setOrigin(.5,.5).setScale(.3);r.add([n,d]),r.setAngle(25),this.wings.set(`${e[0]},${e[1]}`,r)}),f.emit("levelChanged",{level:this.currentLevel,levelCounter:this.levelCounter,score:this.score,lives:this.lives})};useWings=e=>{this.wings.get(e).destroy(),this.wings.delete(e)};create(){this.frozen=!1,this.bonk=!1,this.rocks=[],this.enemies=[],this.wings=new Map,this.map=this.make.tilemap({key:"map"});let e=this.map.addTilesetImage("tiles","map-tiles");this.layer=this.map.createLayer("Tile Layer 1",e,105,160).setScale(1.6),this.hexHeight=e.tileHeight/2,this.hexWidth=2*this.hexSize*Math.sqrt(3),this.layer.setDepth(5),this.bezierGraphics=this.add.graphics(),this.bezierGraphics.setDepth(4),this.spawnDelay=3500,this.debugGraphics=this.add.graphics({lineStyle:{width:2,color:65280}}),Ve(this),Ne(this),this.player=new te(this),this.fullReset()}reset=e=>{this.rocks.forEach(s=>{s.destroy()}),this.enemies.forEach(s=>{s.destroy()}),this.rocks=[],this.enemies=[],this.levelComplete=!1,this.elapsed=0,this.bonk=!1,this.player.resetPlayer(this,e),f.emit("resumeTimer")};fullReset=()=>{this.gameOver=!1;for(let[e,s]of this.wings.entries())this.wings.get(e).destroy();this.wings.clear(),this.levelComplete=!1,this.elapsed=0,this.elapsedSeconds=0,this.milliseconds=0,this.reset(!0),this.setupLevel(),this.cameras.main.setZoom(1.3),this.cameras.main.startFollow(this.player.player,!0,0,0,0,-200),this.cameras.main.fadeEffect.start(!1,250,0,0),f.emit("fullReset")};nextLevel=()=>{this.levelCounter++,this.scene.stop("Game"),this.scene.sleep("GameUI"),this.scene.sleep("Clouds"),this.scene.launch("LevelIntro",{levelCounter:this.levelCounter})};GameOver=()=>{this.gameOver=!0,this.gameoverSound.play(),this.lives=3,this.score=0,this.scene.get("GameOver")?this.scene.start("GameOver"):this.scene.add("GameOver",Ye,!0)};killRock=e=>{this.rocks.splice(this.rocks.indexOf(e),1),e.destroy(this)};addEnemy=(e,s)=>{let r=new Je(this,e,s);this.enemies.push(r)};killEnemy=e=>{this.enemies.splice(this.enemies.indexOf(e),1),e.destroy(this)};thaw=()=>{this.frozen&&(f.emit("thaw"),this.frozen=!1,this.originalTiles.forEach(e=>{this.tweens.add({targets:e,alpha:1,duration:Phaser.Math.Between(300,1250),ease:"Power2"})}),this.frozenTiles.forEach(e=>{this.tweens.add({targets:e,alpha:0,duration:Phaser.Math.Between(1500,2500),ease:"ease.in",onComplete:()=>{e.destroy()}})}),this.thawTimer&&clearTimeout(this.thawTimer))};freeze=()=>{f.emit("freeze"),this.frozen=!0,this.freezeSound.play(),this.frozenTiles=new Set,this.originalTiles=new Set,this.layer.forEachTile(e=>{if(this.map.hasTileAt(e.x,e.y,"Tile Layer 1")){this.originalTiles.add(e);let s=_(this.hexHeight,e.x,e.y),r=this.add.sprite(s[0],s[1]+48,"ice-cube").setOrigin(.5,.5).setScale(1.6).setDepth(5).setAlpha(0).setActive(!0);this.frozenTiles.add(r)}}),this.originalTiles.forEach(e=>{this.tweens.add({targets:e,alpha:0,duration:1e3,ease:"Power2"})}),this.frozenTiles.forEach(e=>{this.tweens.add({targets:e,alpha:.7,duration:Phaser.Math.Between(300,1250),ease:"Power2"})}),this.thawTimer=setTimeout(()=>{this.thaw()},4e3)};update(e,s){!this.bonk&&!this.levelComplete&&(this.player.updatePlayer(this,e,s),Ge(this),this.frozen||(this.elapsed+=s,this.elapsed>this.spawnDelay&&(this.elapsed=0,this.currentLevel.hasHob?this.addEnemy(v.HOB,[3,0]):this.rocks.push(new ze(this))),this.rocks.forEach(r=>{r.update(this,e,s)}),this.enemies.forEach(r=>{r.update(this,e,s)})))}loseLife=()=>{this.bonk||(this.frozen&&this.thaw(),this.lives--,f.emit("die"),this.lives===0&&this.GameOver())}},He=ve;var we=class extends Phaser.Scene{constructor(){super({key:"LevelIntro",physics:{arcade:{debug:!1},matter:{debug:!1}},active:!1});this.timer=0,this.elapsedSeconds=0,this.FONT="Bubblegum Sans",this.FONT_SIZE="72px"}purgeTexture(e){this.textures.exists(e)&&this.textures.remove(e)}init(e){this.done=!1,this.levelCounter=e.levelCounter,this.currentLevel=se[this.levelCounter],this.successColors=this.currentLevel.successColors,this.jumpDirections=[],this.successColors.forEach(s=>{this.jumpDirections.push(k),this.jumpDirections.push(O),this.jumpDirections.push(T),this.jumpDirections.push(w)})}preload(){this.purgeTexture("map-tiles"),this.purgeTexture("sprites"),this.load.addFile(new G(this.load,this.FONT)),this.load.multiatlas("sprites","assets/sprites/gj_bird.json","assets/sprites"),this.load.multiatlas("map-tiles","assets/maps/map-tiles.json","assets/maps"),this.load.image("successTile","assets/maps/cube-top-grey.png"),this.load.tilemapTiledJSON("intro-map","assets/maps/level-intro-tiled.json"),this.load.audio("jump","assets/sounds/jump.mp3")}create(){this.jumpSound=this.sound.add("jump"),this.levelLabelText=this.add.text(240,300,"LEVEL ",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("levelLabelText"),this.levelText=this.add.text(470,300,this.levelCounter+1,{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("levelLabelText"),this.levelLabelText.setStroke("#000",4),this.levelText.setStroke("#000",4),this.getReadyText=this.add.text(200,700,"GET READY!",{fontFamily:'"'+this.FONT+'"',fill:"#FFFFFF",fontSize:this.FONT_SIZE}).setName("getReadyLabelText").setAlpha(0),this.getReadyText.setStroke("#000",4),this.map=this.make.tilemap({key:"intro-map"});let e=this.map.addTilesetImage("tiles","map-tiles");this.layer=this.map.createLayer("Tile Layer 1",e,110,450).setScale(1.6),this.hexHeight=e.tileHeight/2,this.hexWidth=2*this.hexSize*Math.sqrt(3),this.layer.forEachTile(s=>{s.tint=this.currentLevel.color}),this.player=new te(this,!0),this.player.player.intro=!0,this.player.player.x=390,this.player.player.y=440}update(e,s){this.player.updatePlayer(this,e,s),this.timer+=s,this.timer>500&&(this.timer=0,this.jumpDirections.length>0?(this.player.Jump(this,this.jumpDirections[0]),this.jumpDirections.shift()):this.done||(this.done=!0,this.player.Jump(this,k),this.tweens.add({targets:this.getReadyText,alpha:1,duration:200,ease:"Linear"}),setTimeout(()=>{this.scene.stop("LevelIntro"),this.scene.get("Clouds")?this.scene.start("Clouds"):this.scene.add("Clouds",We,!0),this.scene.get("Game")||this.scene.add("Game",He,!1),this.scene.get("GameUI")?this.scene.start("GameUI"):this.scene.add("GameUI",Ue,!0),this.scene.start("Game",{levelCounter:this.levelCounter})},1500)))}},Xe=we;var ie="Bubblegum Sans",Te=class extends Phaser.Scene{constructor(){super({key:"Intro",active:!1});this.textX=15,this.egg,this.forceTTL=500,this.elapsed=0,this.blinkTTL=500}preload(){this.load.addFile(new G(this.load,ie)),this.load.audio("thwop","assets/sounds/thwop.mp3"),this.load.image("ground","assets/sprites/ground.png"),this.load.multiatlas("sheet","assets/sprites/egg_sprites.json","assets/sprites"),this.load.json("shapes","assets/sprites/egg.json"),this.load.audio("coilyhatch","assets/sounds/coilyhatch.mp3"),this.load.audio("jump","assets/sounds/jump.mp3"),this.load.multiatlas("sprites","assets/sprites/gj_bird.json","assets/sprites"),this.load.image("background","assets/images/background.png")}addText(e){let s=this.add.text(this.textX,220,e,{fontFamily:'"'+ie+'"',fontSize:"200px",fontWeight:"bold",fill:"#fff"});s.setStroke("#fff",30);let r=this.add.text(this.textX,220,e,{fontFamily:'"'+ie+'"',fontSize:"200px",fontWeight:"bold",fill:"#ff8400"});r.setShadow(0,0,"#AAAAAA",20,!1,!0),r.setStroke("transparent",30);let n=this.add.container(0,0);return n.add([s,r]),this.textX+=85*e.length,n}createEggVertices=function(){for(var e=[],s=.719,r=s*.111111111,n=0;n<=2*Math.PI;n+=.1047){var d=new Phaser.Math.Vector2((r*Math.cos(n)+s)*Math.sin(n),-Math.cos(n));e.push({x:36.17+50*d.x,y:50+50*d.y})}return e};createEgg=()=>{let e=this.matter.add.image(384,700,"ground",null,{isStatic:!0});var s=this.cache.json.get("shapes");this.egg=this.matter.add.sprite(100,600,"sheet","egg",{shape:s.egg}),this.egg.setScale(.3)};jumpBJBird=()=>{var e=this.birdContainer.x,s=this.birdContainer.y,r=new Phaser.Math.Vector2(e,s),n=new Phaser.Math.Vector2(e+75,s-150),d=new Phaser.Math.Vector2(e+75,s-150),u=new Phaser.Math.Vector2(e+150,s);let y=new Phaser.Curves.CubicBezier(r,n,d,u);var R={value:0,previousValue:0};this.tweens.add({targets:R,value:1,duration:280,callbackScope:this,onUpdate:function(b,P){var A=y.getPoint(P.value),L=y.getPoint(P.previousValue);this.birdContainer.x+=A.x-L.x,this.birdContainer.y+=A.y-L.y,P.previousValue=P.value,this.shadowSprite.setAlpha(.75*P.value),this.shadowSprite.x+=A.x-L.x,this.shadowSprite.y=s+645},onComplete:function(){setTimeout(()=>{this.tweens.add({targets:[this.G,this.J,this.Bird],alpha:0,duration:500,ease:"quint.out"})},2e3),setTimeout(()=>{this.scene.stop("Intro"),this.scene.add("LevelIntro",Xe,!0,{levelCounter:0})},3e3)}})};hatchGJBird=()=>{var e=this.cache.json.get("shapes");this.eggCrackedTop=this.matter.add.sprite(300,670,"sheet","egg_cracked_top",{shape:e.egg_cracked_top}),this.eggCrackedTop.setScale(.3),this.eggCrackedTop.setVelocity(0,-20),this.eggCrackedTop.setAngularVelocity(1),this.eggCrackedBottom=this.matter.add.sprite(300,610,"sheet","egg_cracked_bottom",{shape:e.egg_cracked_bottom}),this.eggCrackedBottom.setScale(.3),this.eggCrackedTop.setPosition(this.egg.body.position.x,this.egg.body.position.y-10),this.eggCrackedBottom.setPosition(this.egg.body.position.x,this.egg.body.position.y),this.eggCrackedTop.setAngle(this.egg.body.angle),this.eggCrackedBottom.setAngle(this.egg.body.angle),this.eggCrackedTop.setAngularVelocity(this.egg.body.angularVelocity*2+.1),this.eggCrackedBottom.setAngularVelocity(this.egg.body.angularVelocity),this.eggCrackedBottom.setVelocity(this.egg.body.velocity.x,this.egg.body.velocity.y),this.birdContainer=this.add.container(0,0),this.birdSprite=this.add.sprite(0,0,"sprites","GJ-Bird").setOrigin(.5,.5).setScale(.45).setActive(1).setAlpha(1),this.DRBSprite=this.add.sprite(0,0,"sprites","GJ-Bird-blink").setOrigin(.5,.5).setScale(.45).setAlpha(0).setActive(!1),this.shadowSprite=this.add.sprite(-4,0,"sprites","shadow").setOrigin(.5,.5).setScale(.45).setAlpha(0).setActive(!0),this.birdSprite.setPosition(this.egg.body.position.x,this.egg.body.position.y-5),this.DRBSprite.setPosition(this.egg.body.position.x,this.egg.body.position.y-5),this.shadowSprite.setPosition(this.egg.body.position.x-4,this.egg.body.position.y+28),this.birdContainer.add([this.birdSprite,this.DRBSprite]),this.jumpBJBird(),this.egg.destroy()};continue=()=>{this.tapText.destroy(),this.hatchGJBird(),this.coilyhatchSound.play(),this.jumpSound.play(),this.G=this.addText("G."),this.J=this.addText("J.").setAlpha(0),this.Bird=this.addText("Bird!").setAlpha(0),this.cameras.main.shake(100,.01),this.thwopSound=this.sound.add("thwop"),this.thwopSound.play(),setTimeout(()=>{this.J.setAlpha(1),this.cameras.main.shake(100,.01)},300),setTimeout(()=>{this.Bird.setAlpha(1),this.cameras.main.shake(100,.03),this.input.addPointer(1)},1e3)};create(){this.add.image(0,0,"background").setOrigin(0,0),this.matter.set60Hz(),this.coilyhatchSound=this.sound.add("coilyhatch"),this.jumpSound=this.sound.add("jump"),this.timer=0;let e=this.game.device.os.desktop?"Click":"Tap";this.tapText=this.add.text(297,400,e+" to start!",{fontFamily:'"'+ie+'"',fontSize:"30px",fontWeight:"bold",fill:"#ffffff"}),this.tweens.add({targets:[this.tapText],alpha:0,yoyo:!0,duration:500,ease:"quint.in",repeat:-1}),this.createEgg()}update(e,s){this.elapsed+=s,this.elapsed>600&&this.input.activePointer.isDown&&!this.continued?(this.input.activePointer.isDown=!1,this.continued=!0,this.continue()):(this.egg&&this.forceTTL>0&&(this.egg.applyForceFrom({x:0,y:0},{x:5e-4,y:0}),this.forceTTL-=s),this.birdContainer&&(this.blinkTTL-=s,this.blinkTTL<=0&&(this.blinkTTL=Phaser.Math.Between(500,2e3),this.birdSprite.setAlpha(0),this.DRBSprite.setAlpha(1),setTimeout(()=>{this.birdSprite.setAlpha(1),this.DRBSprite.setAlpha(0)},100))))}},Ke=Te;var Ot={type:Phaser.WEBGL,scale:{mode:Phaser.Scale.FIT,parent:"Game",autoCenter:Phaser.Scale.CENTER_BOTH,width:768,height:1024},width:1024,height:768,backgroundColor:8900346,audio:{disableWebAudio:!1},physics:{default:"matter",matter:{gravity:{y:2}},arcade:{gravity:{y:0}}},scene:[Ke]},Ds=new Phaser.Game(Ot);})();
